'use strict';

var neo4j = require('neo4j-driver').v1;
var driver = neo4j.driver("bolt://localhost", neo4j.auth.basic("neo4j", "170310"));
var arts = [
  '10001','10002','10003',
  '12001','12002','12003',
  '13001','13002','13003','13004',
  '12011','12012','12013','12014','12015','12016','12017',
  '16001','16002','16003','16004','16005','16006','16007',
  '16008',
  '17001','17002','17003','17004',
  '17021','17022','17023','17024','17025',
  '20101','20102','20103','20104','20105','20106','20107',
  '20108','20109','20110',
  '20211','20212','20213','20214','20215','20216','20217',
  '20218','20219','20220','20221',
  '21001','21002','21003','21004','21005','21006',
  '21021','21022','21023','21024','21025','21026',
  '22031','22032','22033','22034',
  '22035','22036','22037','22038',
  '22201','22202','22203',
  '23001','23002','23003','23004','23005','23006',
  '23041','23043','23044',
  '23042',
  '23101','23102','23103','23104','23105','23106','23107',
  '24042','24043','24044','24050','24052','24053','24054',
  '25011','25012','25013','25014','25015','25016',
  '25032','25033','25034',
  '25061','25062','25063','25064','25065',
  '25071','25072','25075',
  '25073','25074',
  '25101','25102','25103',
  '25501','25502','25505',
  '25503','25504',
  '25701','25702','25703','25704','25706','25707',
  '25705',
  '26021','26022','26023','26024','26025','26026',
  '29011','29012','29014','29015','29016',
  '29091','29092','29093','29094','29095',
  '29203',
  '29801','29802','29803','29804',
  '29901','29902','29903','29904','29905','29906',
  '30081','30082','30083','30084','30085','30086','30087',
  '30101','30102','30103','30104','30105','30106',
  '30201','30202',
  '30200','30203','30204','30205','30206','30207','30208',
  '30301','30302','30303','30304','30305',
  '30751','30752','30753',
  '30771','30772','30773','30774','30775',
  '30776',
  '31050','31051','31052','31053','31054','31055','31056',
  '31057','31058','31059',
  '32021',
  '32022','32023','32024',
  '32101','32102','32103','32104','32105',
  '34004','34005',
  '35001','35004','35005','35006',
  '35002','35003',
  '35011','35012','35013',
  '35014','35015',
  '35071','35072','35073','35074',
  '35075',
  '36101','36102','36103','36104','36105',
  '37011','37016',
  '37012','37014',
  '37015',
  '40021','40022','40023','40024','40025',
  '40103','40105','40106','40107','40108',
  '40512','40514',
  '40881','40882','40883',
  '42031','42032','42033','42034',
  '43011',
  '43012','43013','43014',
  '43301','43302','43303','43304','43305','43306',
  '45001','45002','45003','45004',
  '45041','45042','45043','45044',
  '45051','45052','45053',
  '46001','46002','46003','46004',
  '46021','46022',
  '46025',
  '46070','46071','46072','46073','46074',
  '46075','46078','46079',
  '47101','47102','47103','47104',
  '48011','48012','48014','48016',
  '48013',
  '48081','48082','48083','48084',
  '51031','51032','51033',
  '51034',
  '52014',
  '52021','52022','52023','52024',
  '55051','55052','55053','55054','55055','55056',
  '56001','56002','56003','56004','56005',
  '58021','58022','58023','58024','58025',
  '58101','58102','58103','58104','58105',
  '59010',
  '60011','60012','60013','60014','60015',
  '64041','64042','64043','64044','64045',
  '65051','65052','65053','65054',
  '66031','66032','66033','66034',
  '66061','66062','66063',
  '70101','70106',
  '70104','70105','70108','70109',
  '70110','70111','70112','70113',
  '70311','70313',
  '73031','73032','73033','73034',
  '78081','78082','78083','78084','78085',
  '80011','80012','80013','80014','80015','80016',
  '90101','90102','90103','90104',
  '90511','90512','90513',
  '97051','97052','97053',
  '97054',
  '1501','1502','1503','1504','1505','1506',
  '2381','2382','2383','2384','2385','2386',
  '2611','2612','2613','2617',
  '2614','2615','2616','2618','2619','2620',
  '2660','2661','2662','2663','2664','2665','2666',
  '2667','2668','2669',
  '3011','3012','3013','3014','3015',
  '4041','4042','4043','4044','4045',
  '4046','4047','4048',
  '4611','4612','4613','4614','4615','4616',
  '4701','4702','4703','4704','4705','4706',
  '5211','5212','5213','5214','5215','5216','5217',
  '5601','5602','5603','5604','5605',
  '5611','5612','5613','5614','5615','5616',
  '9401','9402','9403','9404','9405','9406','9407',
  '23-890','23-906'
];

var materials = [];
for (let art of arts)
  materials.push({article:art, width:parseFloat(art.slice(0,2)) });




driver.onCompleted = function () {
  console.log('onCompleted all done here');
};

// Register a callback to know if driver creation failed.
// This could happen due to wrong credentials or database unavailability:
driver.onError = function (error) {
  console.log('Driver instantiation failed', error);
  console.log('onError all done here');
};



var session = driver.session();
session
.run('FOREACH (material IN $materials | CREATE (m:Material) SET m = material)', {materials : materials})
.then(function (result) {
  console.log('done, closing session');
  session.close();
  console.log('session closed');
})
.catch(function (error) {
  console.log(error);
  console.log('error, closing session');
  session.close();
  console.log('session closed');
});